---
title: "hw01_gapminder.Rmd"
author: "Becky"
date: '2018-09-08'
output: github_document

---

# Data exploration using the gapminder data set

### Required Libraries
```{r, echo=FALSE}
library(gapminder)
require(plyr)
library(dplyr)
library(ggplot2)
library(gapminder)
gapminder ##calling entire gapminder dataset
max(gapminder$year) 
min(gapminder$year)
```

### Dataset exploration and QC - Insepect and understand the dataset before use/ analysis - correct errors like removing NAs
```{r}
head(gapminder)
tail(gapminder)
summary(gapminder)
dim(gapminder)
names(gapminder)
sum(is.na(gapminder$lifeExp))
sum(is.na(gapminder$gdpPercap))
sum(is.na(gapminder$pop))
gapminder[!complete.cases(gapminder),] # view rows with incomplete data
gapminder %>% distinct(continent) %>% arrange(continent)
gapminder %>% distinct(country) %>% arrange(country)
gapminder %>% distinct(year) %>% arrange(desc(year))
unique(gapminder$year)
#is.na(gapminder)
#gapm <- na.omit(gapminder)
```
### Distribution of gdpPercap across all countries in 2007
```{r}
gapminder %>%
  filter(year==2007) %>%
  ggplot() + 
  geom_histogram(mapping = aes(x = gdpPercap), binwidth = 1000, color = "black") +
  ggtitle("Distribution of gdpPercap across all countries in 2007") +
  labs(x="gdpPercap", y="Countries")
```

### Density plots of life expectancy by continent
#### Oldest year 1952
```{r}
lifexp_1952<- gapminder %>% 
 filter(year == 1952) 
lifexp_1952 %>%
 ggplot(aes(x = lifeExp, fill = continent)) + facet_wrap(~year) + geom_density(alpha = 0.5) + ggtitle("Density plots of lifeExp in 1952 for each continent and across all countries") + theme(legend.title = element_text(color = "gray", size = 14, face = "bold"), legend.background = element_rect(fill = "gray80",
 size = 0.2,
 linetype = "dashed")) +
 labs(x="lifeExp", y="Density")
```
#### Latest year 2007

```{r}

lifeExp_2007<- gapminder %>% 
 filter(year == 2007) 
lifeExp_2007 %>%
 ggplot(aes(x = lifeExp, fill = continent)) + facet_wrap(~year) + 
 geom_density(alpha = 0.5) +
 ggtitle("Density plots of lifeExp in 2007 for each continent and across all countries") +
 theme(legend.title = element_text(color = "gray",
 size = 14,
 face = "bold"),
 legend.background = element_rect(fill = "gray80",
 size = 0.5,
 linetype = "dashed")) +
 labs(x="lifeExp", y="Density")

```

### Awesome Bubble plot from Jenny's [tutorial on gapminder](https://cran.r-project.org/web/packages/gapminder/README.html)
```{r}
gap_with_colors <-
  data.frame(gapminder,
             cc = I(country_colors[match(gapminder$country,
                                         names(country_colors))]))

# bubble plot, focus just on Africa and Europe in 2007
keepers <- with(gap_with_colors,
                continent %in% c("Africa", "Europe") & year == 2007)
plot(lifeExp ~ gdpPercap, gap_with_colors,
     subset = keepers, log = "x", pch = 21,
     cex = sqrt(gap_with_colors$pop[keepers]/pi)/1500,
     bg = gap_with_colors$cc[keepers])
```

### Life Expectancy across all countries

```{r}
ggplot(aes(x = continent, y = lifeExp), data =gapminder) +
geom_boxplot(fill = "slategray1") +
ggtitle("lifeExp across all continents 1952-2007")+theme(plot.title = element_text(hjust = 0.5))

library("ggplot2")
ggplot(gapminder, aes(x = continent, y = lifeExp)) +
geom_boxplot(outlier.colour = "black") +
ggtitle("lifeExp across all continents 1952-2007")+theme(plot.title = element_text(hjust = 0.5))

```

